{"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/weburl\/lazilypercentdecoded"]}],"abstract":[{"type":"text","text":"A "},{"code":"Collection","type":"codeVoice"},{"type":"text","text":" which percent-decodes elements from its "},{"code":"Source","type":"codeVoice"},{"type":"text","text":" on-demand."}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/LazilyPercentDecoded"},"kind":"symbol","metadata":{"externalID":"s:6WebURL20LazilyPercentDecodeda","title":"LazilyPercentDecoded","fragments":[{"text":"typealias","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LazilyPercentDecoded","kind":"identifier"}],"modules":[{"name":"WebURL"}],"symbolKind":"typealias","role":"symbol","navigatorTitle":[{"text":"LazilyPercentDecoded","kind":"identifier"}],"roleHeading":"Type Alias"},"schemaVersion":{"minor":3,"major":0,"patch":0},"hierarchy":{"paths":[["doc:\/\/com.karwa.WebURL\/documentation\/WebURL","doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/PercentEncoding"]]},"primaryContentSections":[{"declarations":[{"languages":["swift"],"tokens":[{"kind":"keyword","text":"typealias"},{"kind":"text","text":" "},{"kind":"identifier","text":"LazilyPercentDecoded"},{"text":"<","kind":"text"},{"text":"Source","kind":"genericParameter"},{"text":"> = ","kind":"text"},{"text":"LazilyPercentDecodedWithSubstitutions","kind":"typeIdentifier","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/LazilyPercentDecodedWithSubstitutions","preciseIdentifier":"s:6WebURL37LazilyPercentDecodedWithSubstitutionsV"},{"text":"<","kind":"text"},{"text":"Source","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"NoSubstitutions","kind":"typeIdentifier","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/NoSubstitutions","preciseIdentifier":"s:6WebURL15NoSubstitutionsV"},{"text":"> ","kind":"text"},{"text":"where","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Source","kind":"typeIdentifier"},{"text":" : ","kind":"text"},{"text":"Collection","kind":"typeIdentifier","preciseIdentifier":"s:Sl"},{"text":", ","kind":"text"},{"text":"Source","kind":"typeIdentifier"},{"text":".","kind":"text"},{"text":"Element","kind":"typeIdentifier"},{"text":" == ","kind":"text"},{"text":"UInt8","kind":"typeIdentifier","preciseIdentifier":"s:s5UInt8V"}],"platforms":["Linux"]}],"kind":"declarations"},{"kind":"content","content":[{"type":"heading","anchor":"discussion","text":"Discussion","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"Percent-decoding transforms certain ASCII sequences to bytes ("},{"type":"codeVoice","code":"\"%AB\""},{"type":"text","text":" to the byte value "},{"type":"codeVoice","code":"0xAB"},{"type":"text","text":", or 171),"},{"type":"text","text":" "},{"type":"text","text":"and is most commonly used to decode content from URLs. The elements of this collection are raw bytes,"},{"type":"text","text":" "},{"type":"text","text":"potentially including NULL bytes or invalid UTF-8."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"To decode a source collection containing a percent-encoded string,"},{"type":"text","text":" "},{"type":"text","text":"use the extension methods provided on "},{"code":"LazyCollectionProtocol","type":"codeVoice"},{"type":"text","text":":"}]},{"type":"codeListing","syntax":"swift","code":["\/\/ Lazy decoding is especially useful for looking through decoded content.","\/\/ When used with WebURL's UTF8View, you can process encoded URL components","\/\/ without allocating additional memory.","let someURLs: [WebURL] = [","  WebURL(\"https:\/\/root@example.com\/\")!,","  WebURL(\"https:\/\/%72oot@example.com\/\")!,","  WebURL(\"https:\/\/r%6F%6Ft@example.com\/\")!","]","for url in someURLs {","  guard let usernameUTF8 = url.utf8.username else {","    continue \/\/ No username.","  }","  if usernameUTF8.lazy.percentDecoded().elementsEqual(\"root\".utf8) {","    throw InvalidUsernameError()","  }","}","","\/\/ Any Collection of bytes can be lazily decoded, including","\/\/ String's UTF8View, Foundation's Data, NIO's ByteBuffer, etc.","\"%61%62%63\".utf8","  .lazy.percentDecoded()","  .elementsEqual(\"abc\".utf8) \/\/ âœ…"]},{"type":"aside","name":"Note","content":[{"inlineContent":[{"text":"This type does not reverse substitutions made by form-encoding.","type":"text"},{"text":" ","type":"text"},{"text":"Use ","type":"text"},{"identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/LazilyPercentDecodedWithSubstitutions","type":"reference","isActive":true},{"text":" providing the ","type":"text"},{"identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/SubstitutionMap\/formEncoding","type":"reference","isActive":true},{"text":" ","type":"text"},{"text":"substitution map, to lazily decode form-encoded content.","type":"text"}],"type":"paragraph"}],"style":"note"}]}],"seeAlsoSections":[{"generated":true,"identifiers":["doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/LazilyPercentEncoded","doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/LazilyPercentDecodedWithSubstitutions"],"title":"Encoding and Decoding Lazily"}],"sections":[],"references":{"doc://com.karwa.WebURL/documentation/WebURL/LazilyPercentDecodedWithSubstitutions":{"kind":"symbol","type":"topic","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LazilyPercentDecodedWithSubstitutions","kind":"identifier"}],"navigatorTitle":[{"text":"LazilyPercentDecodedWithSubstitutions","kind":"identifier"}],"url":"\/documentation\/weburl\/lazilypercentdecodedwithsubstitutions","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/LazilyPercentDecodedWithSubstitutions","abstract":[{"type":"text","text":"A "},{"code":"Collection","type":"codeVoice"},{"type":"text","text":" which percent-decodes elements from its "},{"code":"Source","type":"codeVoice"},{"type":"text","text":" on-demand,"},{"type":"text","text":" "},{"type":"text","text":"and reverses substitutions made by a "},{"identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/SubstitutionMap","type":"reference","isActive":true},{"type":"text","text":"."}],"title":"LazilyPercentDecodedWithSubstitutions","role":"symbol"},"doc://com.karwa.WebURL/documentation/WebURL/NoSubstitutions":{"fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"NoSubstitutions"}],"navigatorTitle":[{"kind":"identifier","text":"NoSubstitutions"}],"identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/NoSubstitutions","url":"\/documentation\/weburl\/nosubstitutions","role":"symbol","title":"NoSubstitutions","abstract":[{"text":"A substitution map which does not substitute any code-points.","type":"text"}],"type":"topic","kind":"symbol"},"doc://com.karwa.WebURL/documentation/WebURL/LazilyPercentDecoded":{"type":"topic","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/LazilyPercentDecoded","title":"LazilyPercentDecoded","kind":"symbol","navigatorTitle":[{"text":"LazilyPercentDecoded","kind":"identifier"}],"url":"\/documentation\/weburl\/lazilypercentdecoded","abstract":[{"text":"A ","type":"text"},{"type":"codeVoice","code":"Collection"},{"text":" which percent-decodes elements from its ","type":"text"},{"type":"codeVoice","code":"Source"},{"text":" on-demand.","type":"text"}],"role":"symbol","fragments":[{"text":"typealias","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LazilyPercentDecoded","kind":"identifier"}]},"doc://com.karwa.WebURL/documentation/WebURL/SubstitutionMap/formEncoding":{"title":"formEncoding","conformance":{"conformancePrefix":[{"type":"text","text":"Conforms when"}],"constraints":[{"code":"Self","type":"codeVoice"},{"type":"text","text":" is "},{"code":"URLEncodeSet.FormEncoding.Substitutions","type":"codeVoice"},{"type":"text","text":"."}],"availabilityPrefix":[{"type":"text","text":"Available when"}]},"type":"topic","kind":"symbol","url":"\/documentation\/weburl\/substitutionmap\/formencoding","fragments":[{"text":"static","kind":"keyword"},{"text":" ","kind":"text"},{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"text":"formEncoding","kind":"identifier"},{"text":": ","kind":"text"},{"text":"URLEncodeSet","preciseIdentifier":"s:6WebURL12URLEncodeSetO","kind":"typeIdentifier"},{"text":".","kind":"text"},{"text":"FormEncoding","preciseIdentifier":"s:6WebURL12URLEncodeSetO12FormEncodingV","kind":"typeIdentifier"},{"text":".","kind":"text"},{"text":"Substitutions","preciseIdentifier":"s:6WebURL12URLEncodeSetO12FormEncodingV13SubstitutionsV","kind":"typeIdentifier"}],"identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/SubstitutionMap\/formEncoding","role":"symbol","abstract":[{"text":"Form-encoding. This substitution map is used to encode or decode","type":"text"},{"text":" ","type":"text"},{"identifier":"https:\/\/url.spec.whatwg.org\/#application\/x-www-form-urlencoded","isActive":true,"type":"reference"},{"text":" content.","type":"text"}]},"doc://com.karwa.WebURL/documentation/WebURL/PercentEncoding":{"role":"collectionGroup","abstract":[{"type":"text","text":"Encode Data for a URL, or Decode Data from a URL."}],"title":"Percent-Encoding and Decoding","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/PercentEncoding","url":"\/documentation\/weburl\/percentencoding","type":"topic","kind":"article"},"doc://com.karwa.WebURL/documentation/WebURL/LazilyPercentEncoded":{"type":"topic","title":"LazilyPercentEncoded","navigatorTitle":[{"text":"LazilyPercentEncoded","kind":"identifier"}],"abstract":[{"text":"A ","type":"text"},{"code":"Collection","type":"codeVoice"},{"text":" which percent-encodes elements from its ","type":"text"},{"code":"Source","type":"codeVoice"},{"text":" on-demand using a given ","type":"text"},{"code":"EncodeSet","type":"codeVoice"},{"text":".","type":"text"}],"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LazilyPercentEncoded","kind":"identifier"}],"role":"symbol","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/LazilyPercentEncoded","kind":"symbol","url":"\/documentation\/weburl\/lazilypercentencoded"},"https://url.spec.whatwg.org/#application/x-www-form-urlencoded":{"url":"https:\/\/url.spec.whatwg.org\/#application\/x-www-form-urlencoded","type":"link","title":"application\/x-www-form-urlencoded","identifier":"https:\/\/url.spec.whatwg.org\/#application\/x-www-form-urlencoded","titleInlineContent":[{"text":"application\/x-www-form-urlencoded","type":"text"}]},"doc://com.karwa.WebURL/documentation/WebURL":{"identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL","abstract":[{"text":"A new URL type for Swift.","type":"text"}],"url":"\/documentation\/weburl","role":"collection","title":"WebURL","kind":"symbol","type":"topic"},"doc://com.karwa.WebURL/documentation/WebURL/SubstitutionMap":{"kind":"symbol","type":"topic","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"SubstitutionMap","kind":"identifier"}],"navigatorTitle":[{"text":"SubstitutionMap","kind":"identifier"}],"url":"\/documentation\/weburl\/substitutionmap","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/SubstitutionMap","abstract":[{"type":"text","text":"A bidirectional map of ASCII code-points."}],"title":"SubstitutionMap","role":"symbol"}}}